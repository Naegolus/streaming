Version 4
SHEET 1 4992 680
WIRE 3872 -1696 3856 -1696
WIRE 0 -1664 0 -1680
WIRE 208 -1664 0 -1664
WIRE 0 -1632 0 -1664
WIRE 208 -1632 208 -1664
WIRE 3872 -1632 3872 -1696
WIRE 4016 -1632 3872 -1632
WIRE 3280 -1616 2832 -1616
WIRE -720 -1600 -752 -1600
WIRE 1072 -1600 624 -1600
WIRE 2832 -1584 2832 -1616
WIRE 3872 -1584 3872 -1632
WIRE 4016 -1584 4016 -1632
WIRE -656 -1568 -656 -1600
WIRE -656 -1568 -752 -1568
WIRE -48 -1568 -192 -1568
WIRE 1072 -1568 1072 -1600
WIRE -192 -1552 -192 -1568
WIRE 624 -1552 624 -1600
WIRE -1008 -1536 -1120 -1536
WIRE -896 -1536 -928 -1536
WIRE -752 -1536 -752 -1568
WIRE -752 -1536 -816 -1536
WIRE -720 -1536 -720 -1600
WIRE -608 -1536 -720 -1536
WIRE 0 -1520 0 -1552
WIRE 208 -1520 208 -1568
WIRE 208 -1520 0 -1520
WIRE 3824 -1520 3696 -1520
WIRE -720 -1488 -720 -1536
WIRE -656 -1488 -720 -1488
WIRE 3872 -1472 3872 -1504
WIRE 4016 -1472 4016 -1520
WIRE 4016 -1472 3872 -1472
WIRE 3872 -1456 3872 -1472
WIRE -1120 -1440 -1120 -1536
WIRE 0 -1440 0 -1520
WIRE -608 -1424 -608 -1536
WIRE 1920 -1408 1344 -1408
WIRE 2560 -1408 2000 -1408
WIRE 2832 -1392 2832 -1504
WIRE 1072 -1376 1072 -1488
WIRE 3872 -1360 3872 -1376
WIRE -1120 -1328 -1120 -1360
WIRE -656 -1328 -656 -1424
WIRE -656 -1328 -1120 -1328
WIRE -608 -1328 -608 -1344
WIRE -608 -1328 -656 -1328
WIRE -528 -1328 -608 -1328
WIRE 0 -1328 0 -1360
WIRE 2560 -1296 2560 -1408
WIRE 3280 -1296 3280 -1616
WIRE 1344 -1280 1344 -1408
WIRE 2832 -1248 2832 -1312
WIRE 1072 -1232 1072 -1296
WIRE -528 -1152 -528 -1328
WIRE 0 -1152 0 -1248
WIRE 2832 -1120 2832 -1168
WIRE 3216 -1120 2832 -1120
WIRE 3280 -1120 3280 -1216
WIRE 3280 -1120 3216 -1120
WIRE 624 -1104 624 -1472
WIRE 688 -1104 624 -1104
WIRE 1072 -1104 1072 -1152
WIRE 1072 -1104 688 -1104
WIRE 3216 -1088 3216 -1120
WIRE 688 -1072 688 -1104
WIRE 3872 -1056 3872 -1280
WIRE 256 -816 256 -848
WIRE 256 -816 160 -816
WIRE 304 -816 256 -816
WIRE 400 -816 304 -816
WIRE 304 -800 304 -816
WIRE 160 -784 160 -816
WIRE 400 -784 400 -816
WIRE 3040 -752 3040 -784
WIRE 3040 -752 2944 -752
WIRE 3088 -752 3040 -752
WIRE 3184 -752 3088 -752
WIRE 3088 -736 3088 -752
WIRE 2944 -720 2944 -752
WIRE 3184 -720 3184 -752
WIRE 400 -704 400 -720
WIRE 3184 -640 3184 -656
WIRE 16 -528 16 -576
WIRE 544 -528 544 -560
WIRE 1152 -512 1152 -544
WIRE 2800 -464 2800 -512
WIRE 3328 -464 3328 -496
WIRE 3936 -448 3936 -480
WIRE 16 -416 16 -448
WIRE 544 -416 544 -448
WIRE 1152 -400 1152 -432
WIRE 2800 -352 2800 -384
WIRE 3328 -352 3328 -384
WIRE 3936 -336 3936 -368
WIRE 240 -320 240 -336
WIRE 3024 -256 3024 -272
WIRE 240 -112 240 -144
WIRE 3024 -48 3024 -80
WIRE 240 0 240 -32
WIRE 3024 64 3024 32
FLAG -528 -1152 0
FLAG 688 -1072 0
FLAG 1344 -1200 0
FLAG 3216 -1088 0
FLAG 2560 -1216 0
FLAG 0 -1680 M1
FLAG 3856 -1696 M2
FLAG -752 -1600 M1
FLAG -656 -1600 M2
FLAG 304 -720 0
FLAG 400 -704 0
FLAG 160 -704 0
FLAG 256 -848 b10
FLAG 240 -240 0
FLAG 240 -336 B17
FLAG 0 -1072 0
FLAG 3872 -976 0
FLAG -192 -1472 0
FLAG -48 -1616 0
FLAG 3616 -1520 0
FLAG 3824 -1568 0
FLAG 240 0 0
FLAG 240 -144 b30
FLAG 16 -416 0
FLAG 544 -416 0
FLAG 1152 -400 0
FLAG 16 -576 B3
FLAG 544 -560 B19
FLAG 1152 -544 B20
FLAG 3088 -656 0
FLAG 3184 -640 0
FLAG 2944 -640 0
FLAG 3040 -784 b10
FLAG 3024 -176 0
FLAG 3024 -272 B12
FLAG 3024 64 0
FLAG 3024 -80 b13
FLAG 2800 -352 0
FLAG 3328 -352 0
FLAG 3936 -336 0
FLAG 2800 -512 B14
FLAG 3328 -496 B15
FLAG 3936 -480 B16
SYMBOL voltage -1120 -1456 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 11.72 1m 10n 1n 4000m 8000m)
SYMBOL res -16 -1456 R0
WINDOW 3 36 68 Left 2
SYMATTR Value 7.1
SYMATTR InstName Motor_DCR
SYMBOL res 1056 -1392 R0
WINDOW 3 36 68 Left 2
SYMATTR Value 2m
SYMATTR InstName Internal_Loss
SYMBOL bv 1072 -1136 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B6
SYMATTR Value V=I(Motor_L)
SYMBOL bv 1344 -1296 R0
SYMATTR InstName B2
SYMATTR Value V=-(I(B6)*SpeedConversionK1)
SYMBOL bv 624 -1568 R0
SYMATTR InstName B4
SYMATTR Value V=(I(B2)*SpeedConversionK1)
SYMBOL ind 1056 -1584 R0
SYMATTR InstName Inertia
SYMATTR Value 10m
SYMATTR SpiceLine Rser=0
SYMBOL ind -16 -1344 R0
SYMATTR InstName Motor_L
SYMATTR Value 100m
SYMATTR SpiceLine Rser=0
SYMBOL res 3888 -1472 M0
WINDOW 3 36 68 Left 2
SYMATTR Value 7.0
SYMATTR InstName Motor_DCR1
SYMBOL res 2848 -1408 M0
WINDOW 3 36 68 Left 2
SYMATTR Value 1.89m
SYMATTR InstName Internal_Loss1
SYMBOL bv 2832 -1152 M180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B7
SYMATTR Value V=I(B27)
SYMBOL bv 2560 -1312 M0
SYMATTR InstName B8
SYMATTR Value V=-(I(B7)*SpeedConversionK2)
SYMBOL bv 3280 -1312 M0
SYMATTR InstName B9
SYMATTR Value V=(I(B8)*SpeedConversionK2)
SYMBOL ind 2848 -1600 M0
SYMATTR InstName Inertia1
SYMATTR Value 10m
SYMATTR SpiceLine Rser=0
SYMBOL ind 3888 -1376 M0
SYMATTR InstName Motor_L1
SYMATTR Value 100m
SYMATTR SpiceLine Rser=0
SYMBOL res 2016 -1424 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res -800 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100m
SYMBOL res -624 -1440 R0
SYMATTR InstName R2
SYMATTR Value 102.3
SYMBOL bi 160 -704 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B10
SYMATTR Value I=I(B6)
SYMBOL res 288 -816 R0
SYMATTR InstName R4
SYMATTR Value 1T
SYMBOL cap 384 -784 R0
SYMATTR InstName C1
SYMATTR Value .02
SYMBOL bv 240 -336 R0
SYMATTR InstName B17
SYMATTR Value V=max(v(b3),max(v(b19),v(b20)))
SYMBOL bv 0 -1168 R0
SYMATTR InstName B18
SYMATTR Value V=v(b17)*-I(B6)
SYMBOL bv 3872 -1072 R0
SYMATTR InstName B27
SYMATTR Value V=v(b12)*-I(B7)
SYMBOL bv -192 -1568 R0
SYMATTR InstName B1
SYMATTR Value V=v(b30)
SYMBOL sw 0 -1648 R0
SYMATTR InstName S1
SYMBOL bv 3712 -1520 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B5
SYMATTR Value V=V(b13)
SYMBOL sw 3872 -1600 R0
SYMATTR InstName S2
SYMBOL bv 240 -128 R0
SYMATTR InstName B30
SYMATTR Value V=if(V(B17)>{spark},v(B17),0)
SYMBOL ind -912 -1552 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 10µ
SYMBOL bv 16 -544 R0
SYMATTR InstName B3
SYMATTR Value V=abs(sin({par}+12*pi/6+v(B10)))
SYMBOL bv 544 -544 R0
SYMATTR InstName B19
SYMATTR Value V=abs(sin({par}+12*pi/6+2*pi/3+v(B10)))
SYMBOL bv 1152 -528 R0
SYMATTR InstName B20
SYMATTR Value V=abs(sin({par}+12*pi/6+4*pi/3+v(B10)))
SYMBOL Misc\\DIAC 176 -1632 R0
SYMATTR InstName U1
SYMATTR Value SpGap
SYMBOL Misc\\DIAC 3984 -1584 R0
SYMATTR InstName U2
SYMATTR Value SpGap
SYMBOL bi 2944 -640 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B11
SYMATTR Value I=I(B6)
SYMBOL res 3072 -752 R0
SYMATTR InstName R5
SYMATTR Value 1T
SYMBOL cap 3168 -720 R0
SYMATTR InstName C3
SYMATTR Value .02
SYMBOL bv 3024 -272 R0
SYMATTR InstName B12
SYMATTR Value V=max(v(b14),max(v(b15),v(b16)))
SYMBOL bv 3024 -64 R0
SYMATTR InstName B13
SYMATTR Value V=if(V(B12)>{spark2},v(B12),0)
SYMBOL bv 2800 -480 R0
SYMATTR InstName B14
SYMATTR Value V=abs(sin({par2}+12*pi/6+v(B10)))
SYMBOL bv 3328 -480 R0
SYMATTR InstName B15
SYMATTR Value V=abs(sin({par2}+12*pi/6+2*pi/3+v(B10)))
SYMBOL bv 3936 -464 R0
SYMATTR InstName B16
SYMATTR Value V=abs(sin({par2}+12*pi/6+4*pi/3+v(B10)))
SYMBOL cap -672 -1488 R0
SYMATTR InstName C2
SYMATTR Value 100p
TEXT -1568 -1304 Left 2 !.tran 0 2 1 10u
TEXT -80 -1840 Left 4 ;Electrical circuit
TEXT 720 -1808 Left 4 ;Internal mechanics
TEXT 136 -1368 Left 2 ;Motor_DCR= Vin/I_stall
TEXT 560 -1016 Left 2 ;Internal_Loss=I_noload/(Vin(1-I_noload/I_stall))
TEXT -64 -1800 Left 2 ;I=current\nV=voltage
TEXT 736 -1752 Left 2 ;I=rotation speed\nV= torque
TEXT 712 -1240 Left 2 ;Energy exchanged with \nElectrical circuit
TEXT 1384 -1792 Left 4 ;Output
TEXT 1264 -1128 Left 2 !.param speedconversionk1=510.898
TEXT 1376 -1744 Left 2 ;V= Rotations in RPM\nI= torque in 2Pi*Nm
TEXT 712 -1544 Left 2 ;Energy exchanged with\nMechanical circuit
TEXT 4208 -1840 Right 4 ;Electrical circuit
TEXT 3264 -1832 Right 4 ;Internal mechanics
TEXT 4528 -896 Right 2 ;Motor_DCR= Vin/I_stall
TEXT 3344 -1032 Right 2 ;Internal_Loss=I_noload/(Vin(1-I_noload/I_stall))
TEXT 4128 -1776 Right 2 ;I=current\nV=voltage
TEXT 3176 -1760 Right 2 ;I=rotation speed\nV= torque
TEXT 3176 -1448 Right 2 ;Energy exchanged with \nElectrical circuit
TEXT 2584 -1760 Right 4 ;Output
TEXT 2592 -1712 Right 2 ;V= Rotations in RPM\nI= torque in 2Pi*Nm
TEXT 3192 -1288 Right 2 ;Energy exchanged with\nMechanical circuit
TEXT -1568 -1328 Left 2 ;.options reltol=0.0001
TEXT -320 -1608 Left 2 !.model sw sw vt=0.5
TEXT -552 -384 Left 2 !.param par 0.1
TEXT -552 -424 Left 2 ;Start position
TEXT -96 -96 Left 2 ;Spark parameter\n>0.866!
TEXT -136 -16 Left 2 !.param spark=0.868
TEXT 2856 -976 Left 2 !.param speedconversionk2=504.2
TEXT -2712 -1448 Left 2 !.SUBCKT DIAC DIAC_IN DIAC_OUT PARAMS:\n+Tr=0.342\n+Vbo=13.6V\n+Delta_V=19V\n+Ibo=15uA\n*\n*Tr:      Rise time (in µs)\n*Vbo:             Break over voltage            \n*Delta_V: Dynamic breakover voltage\n*Ibo:     Breakover current          \nC_C1         N02098 DIAC_OUT 1u IC=0   \nV_IDIAC1     DIAC_IN N01041 0 \nR_R1         N02098 TRG  {1.462*Tr}  \nD_D1         N06161 N01041 DZ19V \nE_ABM1       TRG DIAC_OUT VALUE { IF(ABS(I(V_IDIAC1))>{Ibo},1,0)}    \nD_D2         N06161 N01060 DZ19V \nD_D3         N10655 N01060 DZ14V \nD_D4         N10655 DIAC_OUT DZ14V \nS_S1         N01041 N01060 N02098 DIAC_OUT _S1\nRS_S1        N02098 DIAC_OUT 1G\nC_C2         DIAC_IN DIAC_OUT 10p\n****************\n* Switch Model *\n****************\n.MODEL        _S1 VSWITCH Roff=1e7 Ron=2.2 Voff=0.1V Von=0.99V\n****************\n* Diodes Model *\n****************\n.model DZ14V    D(Is=3.142f Rs=0.1 Ikf=0 N=1 Xti=3 Eg=1.11 M=.3282\n+                               Vj=.75 Fc=.5 Isr=1.973n Nr=2 Bv={Vbo} Ibv=.14467 Nbv=1.093\n+                               Ibvl=.1m Nbvl=1.2722 Tbv1=001433.3u)\n*\n.model DZ19V D(Is=6.994f Rs=5.612 Ikf=0 N=1 Eg=1.11 M=.2906\n+                    Vj=.75 Fc=.5 Isr=2.088n Nr=2 Bv={Delta_V} Ibv=.17098 Nbv=1.2072\n+                    Ibvl=2.002m Nbvl=1.1457 Tbv1=888.89u)\n*               Vz = 18 @ 14mA, Zz = 37 @ 1mA, Zz = 11 @ 5mA, Zz = 7.9 @ 20mA\n.ends   \n*\n*********************************************************************\n*                                                               Standard DIACs                                      *\n*********************************************************************\n*\n*$\n.subckt SpGap DIAC_IN DIAC_OUT\nX1 DIAC_IN DIAC_OUT DIAC params:\n+Tr=0.342\n+Vbo=20V\n+Delta_V=200V\n+Ibo=6uA\n* 2008 / ST / Rev 1\n.ends\n*$
TEXT 2688 -32 Left 2 ;Spark parameter\n>0.866!
TEXT 2648 48 Left 2 !.param spark2=0.868
TEXT 2496 -440 Left 2 !.param par2 0.1
TEXT 2496 -480 Left 2 ;Start position
